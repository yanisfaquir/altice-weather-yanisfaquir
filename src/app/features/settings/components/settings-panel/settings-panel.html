<div class="max-w-4xl mx-auto p-6">
  <!-- Header -->
  <div class="mb-8">
    <h2 class="text-3xl font-bold text-gray-800 dark:text-white mb-2">
      ‚öôÔ∏è {{ 'settings.title' | translate }}
    </h2>
    <p class="text-gray-600 dark:text-gray-300">
      {{ 'settings.customize' | translate }}
    </p>
  </div>

  <div class="space-y-6">
    
    <!-- Theme Settings -->
    <div class="glass rounded-2xl p-6">
      <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
        üé® {{ 'settings.appearance' | translate }}
      </h3>
      
      <div class="space-y-4">
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
            {{ 'settings.theme' | translate }}
          </label>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
            <button 
              *ngFor="let theme of [ThemeMode.LIGHT, ThemeMode.DARK, ThemeMode.AUTO]"
              (click)="onThemeChange(theme)"
              [class.ring-2]="settings().theme === theme"
              [class.ring-blue-500]="settings().theme === theme"
              class="flex items-center justify-center p-4 border border-gray-300 dark:border-gray-600 
                     rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors">
              <span class="text-2xl mr-3">{{ getThemeIcon(theme) }}</span>
              <span class="font-medium">{{ getThemeLabel(theme) }}</span>
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Language & Region -->
    <div class="glass rounded-2xl p-6">
      <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
        üåç {{ 'settings.languageRegion' | translate }}
      </h3>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Language -->
        <div>
          <label for="language" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            {{ 'settings.language' | translate }}
          </label>
          <select 
            id="language"
            [value]="getCurrentLanguageCode()"
            (change)="onLanguageSelectChange($event)"
            class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg
                   bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500">
            <option *ngFor="let lang of getAvailableLanguages()" [value]="lang.code">
              {{ lang.flag }} {{ lang.name }}
            </option>
          </select>
        </div>

        <!-- Timezone -->
        <div>
          <label for="timezone" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
            {{ 'settings.timezone' | translate }}
            <span class="text-xs text-gray-500 ml-2">({{ getTimezoneOffsetDisplay() }})</span>
          </label>
          <select 
            id="timezone"
            [value]="settings().timezone"
            (change)="onTimezoneSelectChange($event)"
            class="w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg
                   bg-white dark:bg-gray-800 focus:ring-2 focus:ring-blue-500">
            <option *ngFor="let tz of timezones" [value]="tz.value">
              {{ tz.label }}
            </option>
          </select>
          <div class="text-xs text-gray-500 mt-1">
            {{ 'settings.currentTime' | translate }}: {{ getCurrentTimeDisplay() }}
          </div>
        </div>
      </div>
    </div>

    <!-- Display Settings -->
    <div class="glass rounded-2xl p-6">
      <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
        üìä {{ 'settings.displaySettings' | translate }}
      </h3>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <!-- Date Format -->
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
            {{ 'settings.dateFormat' | translate }}
          </label>
          <div class="space-y-2">
            <label *ngFor="let format of getAvailableDateFormats()" 
                   class="flex items-center">
              <input 
                type="radio"
                [value]="format"
                [checked]="settings().dateFormat === format"
                (change)="onDateFormatChange(format)"
                class="mr-3 text-blue-600 focus:ring-blue-500">
              <span>{{ format }} <span class="text-gray-500">({{ getDateFormatExample(format) }})</span></span>
            </label>
          </div>
          <div class="text-xs text-gray-500 mt-2">
            {{ 'settings.sampleDate' | translate }}: {{ sampleDate() }}
          </div>
        </div>

        <!-- Temperature Unit -->
        <div>
          <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">
            {{ 'settings.temperatureUnit' | translate }}
          </label>
          <div class="space-y-2">
            <label *ngFor="let unit of getAvailableTemperatureUnits()" 
                   class="flex items-center">
              <input 
                type="radio"
                [value]="unit"
                [checked]="settings().temperatureUnit === unit"
                (change)="onTemperatureUnitChange(unit)"
                class="mr-3 text-blue-600 focus:ring-blue-500">
              <span>{{ getTemperatureUnitDisplay(unit) }}</span>
            </label>
          </div>
          <div class="text-xs text-gray-500 mt-2">
            {{ 'settings.sampleTemperature' | translate }}: {{ sampleTemperature() }}
          </div>
        </div>
      </div>
    </div>

    
    <!-- System Information -->
    <div class="glass rounded-2xl p-6">
      <h3 class="text-xl font-semibold text-gray-800 dark:text-white mb-4 flex items-center">
        ‚ÑπÔ∏è {{ 'settings.systemInfo' | translate }}
      </h3>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
        <div class="space-y-2">
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-400">{{ 'settings.currentLanguage' | translate }}:</span>
            <span class="font-medium">{{ getCurrentLanguageDisplayName() }}</span>
          </div>
          
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-400">{{ 'settings.currentTimezone' | translate }}:</span>
            <span class="font-medium">{{ currentTimezone().displayName }}</span>
          </div>

          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-400">{{ 'settings.timezoneOffset' | translate }}:</span>
            <span class="font-medium">{{ currentTimezone().offsetString }}</span>
          </div>
        </div>

        <div class="space-y-2">
          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-400">{{ 'settings.currentLanguage' | translate }}:</span>
            <span class="font-medium">{{ getCurrentLanguageDisplayName() }}</span>
          </div>

          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-400">{{ 'settings.currentTheme' | translate }}:</span>
            <span class="font-medium">{{ getThemeLabel(settings().theme) }}</span>
          </div>

          <div class="flex justify-between">
            <span class="text-gray-600 dark:text-gray-400">{{ 'settings.temperatureDisplay' | translate }}:</span>
            <span class="font-medium">{{ getTemperatureUnitDisplay(settings().temperatureUnit) }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Export Modal -->
  <div *ngIf="showExportModal()" 
       class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"
       (click)="closeModal()">
    <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full" 
         (click)="$event.stopPropagation()">
      <h3 class="text-xl font-bold mb-4">{{ 'settings.exportSettings' | translate }}</h3>
      <textarea 
        [value]="exportData()"
        readonly
        class="w-full h-32 p-3 border rounded-lg resize-none bg-gray-50 dark:bg-gray-700 text-sm font-mono"
        [placeholder]="'settings.exportPlaceholder' | translate">
      </textarea>
      <div class="flex justify-end gap-3 mt-4">
        <button 
          (click)="copyExportData()"
          class="px-4 py-2 bg-blue-500 hover:bg-blue-600 text-white rounded-lg">
          {{ 'common.copy' | translate }}
        </button>
        <button 
          (click)="closeModal()"
          class="px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg">
          {{ 'common.close' | translate }}
        </button>
      </div>
    </div>
  </div>

  <!-- Import Modal -->
  <div *ngIf="showImportModal()" 
       class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4"
       (click)="closeModal()">
    <div class="bg-white dark:bg-gray-800 rounded-2xl p-6 max-w-md w-full" 
         (click)="$event.stopPropagation()">
      <h3 class="text-xl font-bold mb-4">{{ 'settings.importSettings' | translate }}</h3>
      <textarea 
        [value]="importData()"
        (input)="onImportDataChange($event)"
        class="w-full h-32 p-3 border rounded-lg resize-none text-sm font-mono"
        [placeholder]="'settings.importPlaceholder' | translate">
      </textarea>
      <div *ngIf="importError()" class="text-red-500 text-sm mt-2">
        {{ importError() }}
      </div>
      <div class="flex justify-end gap-3 mt-4">
        <button 
          (click)="processImport()"
          class="px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-lg">
          {{ 'common.import' | translate }}
        </button>
        <button 
          (click)="closeModal()"
          class="px-4 py-2 bg-gray-500 hover:bg-gray-600 text-white rounded-lg">
          {{ 'common.cancel' | translate }}
        </button>
      </div>
    </div>
  </div>
</div>